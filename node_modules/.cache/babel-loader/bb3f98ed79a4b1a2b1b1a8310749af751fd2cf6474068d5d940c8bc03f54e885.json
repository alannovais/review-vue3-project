{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from \"@/router\";\nimport { useRoute } from \"vue-router\";\nimport { ref, onMounted } from \"vue\";\nimport AlertConfirm from \"@/components/AlertConfirm\";\nexport default {\n  __name: 'DetailContatctView',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const route = useRoute();\n    let array = JSON.parse(localStorage.getItem(\"contacts\"));\n    let user = ref({\n      id: 0,\n      name: \"\",\n      contact: \"\",\n      email: \"\",\n      picture: \"\"\n    });\n    const loadUpdate = () => {\n      if (array == null || typeof array === \"undefined\") return;\n      if (route.params.id && !array.find(e => e.id == route.params.id)) return router.push({\n        path: `/`\n      });\n      let filtred = [];\n      if (array.length > 0) filtred = array.filter(e => e.id == route.params.id);\n      if (filtred.length > 0) user = filtred[0];\n    };\n    onMounted(() => {\n      loadUpdate();\n    });\n    let title = !route.params.id ? \"Create task\" : \"Update task\";\n    const userReset = {\n      id: 0,\n      name: \"\",\n      contact: \"\",\n      email: \"\",\n      picture: \"\"\n    };\n    const register = param => {\n      console.log(param.picture);\n      if (param.contact.trim().length == 0 || param.contact.trim().length == 0) return;\n      let agenda = [];\n      let store = localStorage.getItem(\"contacts\");\n      let objAgenda = {\n        ...param\n      };\n      if (store == null || typeof store === \"undefined\") {\n        objAgenda.id = agenda.length + 1;\n        agenda.push(objAgenda);\n        localStorage.setItem(\"contacts\", JSON.stringify(agenda));\n      } else {\n        agenda = JSON.parse(store);\n        objAgenda.id = agenda.length + 1;\n        agenda.push(objAgenda);\n        localStorage.setItem(\"contacts\", JSON.stringify(agenda));\n      }\n      user.value = {\n        ...userReset\n      };\n      return router.push({\n        path: `/`\n      });\n    };\n    const update = param => {\n      if (param.contact.trim().length == 0 || param.contact.trim().length == 0) return;\n      let agenda = [];\n      let store = localStorage.getItem(\"contacts\");\n      let objAgenda = {\n        ...param\n      };\n      if (!store == null || typeof store !== \"undefined\") {\n        agenda = JSON.parse(store);\n        if (agenda.length > 0) {\n          let updated = agenda.map(e => {\n            if (e.id == route.params.id) {\n              e = {\n                ...objAgenda\n              };\n            }\n            return e;\n          });\n          localStorage.setItem(\"contacts\", JSON.stringify(updated));\n        }\n      }\n      user.value = {\n        ...userReset\n      };\n      return router.push({\n        path: `/`\n      });\n    };\n    const oepnDelete = () => {\n      openDialog.value = true;\n    };\n    let openDialog = ref(false);\n    let dialog = {\n      titleDialog: \"Confirm remove!\",\n      msgDialog: \"Wold you like to confirm remove this record?\",\n      btCofirmDialog: \"Confirm\",\n      btCancelDialog: \"Cancel\"\n    };\n    const OnConfirm = () => {\n      openDialog.value = false;\n      let store = localStorage.getItem(\"contacts\");\n      if (store == null || typeof store === \"undefined\") return;\n      let array = JSON.parse(store);\n      if (array.length > 0) {\n        let deleteArray = array.filter(e => e.id != route.params.id);\n        localStorage.setItem(\"contacts\", JSON.stringify(deleteArray));\n      }\n      return router.push({\n        path: `/`\n      });\n    };\n    const onCancel = () => {\n      openDialog.value = false;\n    };\n    const goToList = () => {\n      router.push({\n        path: `/`\n      });\n    };\n    const picture = event => {\n      let file = event.target.files[0];\n      console.log(event.target.files[0]);\n      const reader = new FileReader();\n      //reader.readAsDataURL(file);\n      reader.onload = async () => {\n        const encodedFile = reader.result.split(\",\")[1];\n        const data = {\n          file: encodedFile\n        };\n        try {\n          console.log(data);\n        } catch (error) {\n          console.error(error);\n        }\n      };\n      console.log(reader.readAsDataURL());\n    };\n    const __returned__ = {\n      route,\n      get array() {\n        return array;\n      },\n      set array(v) {\n        array = v;\n      },\n      get user() {\n        return user;\n      },\n      set user(v) {\n        user = v;\n      },\n      loadUpdate,\n      get title() {\n        return title;\n      },\n      set title(v) {\n        title = v;\n      },\n      userReset,\n      register,\n      update,\n      oepnDelete,\n      get openDialog() {\n        return openDialog;\n      },\n      set openDialog(v) {\n        openDialog = v;\n      },\n      get dialog() {\n        return dialog;\n      },\n      set dialog(v) {\n        dialog = v;\n      },\n      OnConfirm,\n      onCancel,\n      goToList,\n      picture,\n      get router() {\n        return router;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      ref,\n      onMounted,\n      get AlertConfirm() {\n        return AlertConfirm;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["router","useRoute","ref","onMounted","AlertConfirm","route","array","JSON","parse","localStorage","getItem","user","id","name","contact","email","picture","loadUpdate","params","find","e","push","path","filtred","length","filter","title","userReset","register","param","console","log","trim","agenda","store","objAgenda","setItem","stringify","value","update","updated","map","oepnDelete","openDialog","dialog","titleDialog","msgDialog","btCofirmDialog","btCancelDialog","OnConfirm","deleteArray","onCancel","goToList","event","file","target","files","reader","FileReader","onload","encodedFile","result","split","data","error","readAsDataURL"],"sources":["C:/Users/Alan/Documents/dev/cloudcmd/src/pages/DetailContatctView.vue"],"sourcesContent":["<script setup>\r\nimport router from \"@/router\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport AlertConfirm from \"@/components/AlertConfirm\";\r\n\r\nconst route = useRoute();\r\nlet array = JSON.parse(localStorage.getItem(\"contacts\"));\r\n\r\nlet user = ref({\r\n  id: 0,\r\n  name: \"\",\r\n  contact: \"\",\r\n  email: \"\",\r\n  picture: \"\",\r\n});\r\n\r\nconst loadUpdate = () => {\r\n  if (array == null || typeof array === \"undefined\") return;\r\n  if (route.params.id && !array.find((e) => e.id == route.params.id))\r\n    return router.push({ path: `/` });\r\n  let filtred = [];\r\n  if (array.length > 0) filtred = array.filter((e) => e.id == route.params.id);\r\n  if (filtred.length > 0) user = filtred[0];\r\n};\r\n\r\nonMounted(() => {\r\n  loadUpdate();\r\n});\r\n\r\nlet title = !route.params.id ? \"Create task\" : \"Update task\";\r\n\r\nconst userReset = {\r\n  id: 0,\r\n  name: \"\",\r\n  contact: \"\",\r\n  email: \"\",\r\n  picture: \"\",\r\n};\r\n\r\nconst register = (param) => {\r\n  console.log(param.picture);\r\n  if (param.contact.trim().length == 0 || param.contact.trim().length == 0)\r\n    return;\r\n  let agenda = [];\r\n  let store = localStorage.getItem(\"contacts\");\r\n  let objAgenda = { ...param };\r\n\r\n  if (store == null || typeof store === \"undefined\") {\r\n    objAgenda.id = agenda.length + 1;\r\n    agenda.push(objAgenda);\r\n    localStorage.setItem(\"contacts\", JSON.stringify(agenda));\r\n  } else {\r\n    agenda = JSON.parse(store);\r\n    objAgenda.id = agenda.length + 1;\r\n    agenda.push(objAgenda);\r\n    localStorage.setItem(\"contacts\", JSON.stringify(agenda));\r\n  }\r\n  user.value = { ...userReset };\r\n  return router.push({ path: `/` });\r\n};\r\n\r\nconst update = (param) => {\r\n  if (param.contact.trim().length == 0 || param.contact.trim().length == 0)\r\n    return;\r\n  let agenda = [];\r\n  let store = localStorage.getItem(\"contacts\");\r\n  let objAgenda = { ...param };\r\n\r\n  if (!store == null || typeof store !== \"undefined\") {\r\n    agenda = JSON.parse(store);\r\n    if (agenda.length > 0) {\r\n      let updated = agenda.map((e) => {\r\n        if (e.id == route.params.id) {\r\n          e = { ...objAgenda };\r\n        }\r\n        return e;\r\n      });\r\n      localStorage.setItem(\"contacts\", JSON.stringify(updated));\r\n    }\r\n  }\r\n  user.value = { ...userReset };\r\n  return router.push({ path: `/` });\r\n};\r\n\r\nconst oepnDelete = () => {\r\n  openDialog.value = true;\r\n};\r\n\r\nlet openDialog = ref(false);\r\nlet dialog = {\r\n  titleDialog: \"Confirm remove!\",\r\n  msgDialog: \"Wold you like to confirm remove this record?\",\r\n  btCofirmDialog: \"Confirm\",\r\n  btCancelDialog: \"Cancel\",\r\n};\r\n\r\nconst OnConfirm = () => {\r\n  openDialog.value = false;\r\n  let store = localStorage.getItem(\"contacts\");\r\n  if (store == null || typeof store === \"undefined\") return;\r\n  let array = JSON.parse(store);\r\n  if (array.length > 0) {\r\n    let deleteArray = array.filter((e) => e.id != route.params.id);\r\n    localStorage.setItem(\"contacts\", JSON.stringify(deleteArray));\r\n  }\r\n  return router.push({ path: `/` });\r\n};\r\n\r\nconst onCancel = () => {\r\n  openDialog.value = false;\r\n};\r\n\r\nconst goToList = () => {\r\n  router.push({ path: `/` });\r\n};\r\n\r\nconst picture = (event) => {\r\n  let file = event.target.files[0];\r\n  console.log(event.target.files[0]);\r\n  const reader = new FileReader();\r\n  //reader.readAsDataURL(file);\r\n  reader.onload = async () => {\r\n    const encodedFile = reader.result.split(\",\")[1];\r\n    const data = {\r\n      file: encodedFile,\r\n    };\r\n    try {\r\n      console.log(data);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  console.log(reader.readAsDataURL());\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"hello\"\r\n    style=\"display: flex; justify-content: center; flex-direction: column\"\r\n  >\r\n    <h1 style=\"color: #123644\">{{ title }}</h1>\r\n    <div\r\n      style=\"\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: space-between;\r\n        margin-bottom: 1.3rem;\r\n      \"\r\n    >\r\n      <div>\r\n        <v-btn\r\n          type=\"button\"\r\n          width=\"20\"\r\n          @click=\"goToList\"\r\n          elevation=\"6\"\r\n          color=\"#14697f\"\r\n          ><span>\r\n            <v-icon\r\n              color=\"#20dad8\"\r\n              icon=\"mdi-arrow-left\"\r\n              class=\"colorPositionArrow\"\r\n          /></span>\r\n        </v-btn>\r\n      </div>\r\n      <div\r\n        v-if=\"user.id != 0\"\r\n        style=\"background-color: white\"\r\n        @click=\"oepnDelete()\"\r\n      >\r\n        <v-icon\r\n          color=\"red\"\r\n          icon=\"mdi-trash-can-outline\"\r\n          class=\"colorPositionArrow\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <form @keyup.enter=\"register(user)\">\r\n        <v-text-field v-model=\"user.name\" variant=\"outlined\" label=\"Name\" />\r\n        <v-text-field\r\n          v-model=\"user.contact\"\r\n          variant=\"outlined\"\r\n          label=\"Contact\"\r\n          persistent-hint\r\n          type=\"number\"\r\n        />\r\n        <v-text-field\r\n          v-model=\"user.email\"\r\n          variant=\"outlined\"\r\n          label=\"Email\"\r\n          persistent-hint\r\n          type=\"email\"\r\n        />\r\n        <v-text-field\r\n          v-model=\"user.picture\"\r\n          variant=\"outlined\"\r\n          label=\"Photo\"\r\n          type=\"file\"\r\n          @change=\"picture\"\r\n          persistent-hint\r\n        />\r\n        <v-btn\r\n          v-if=\"user.id == 0\"\r\n          type=\"button\"\r\n          :width=\"'1000'\"\r\n          :color=\"'#123644'\"\r\n          @click=\"register(user)\"\r\n          ><span style=\"color: #20dad8\">Save</span>\r\n        </v-btn>\r\n        <v-btn\r\n          v-else\r\n          type=\"button\"\r\n          :width=\"'1000'\"\r\n          :color=\"'#123644'\"\r\n          @click=\"update(user)\"\r\n          ><span style=\"color: #20dad8\">Update</span>\r\n        </v-btn>\r\n      </form>\r\n    </div>\r\n    <AlertConfirm\r\n      :setDialog=\"openDialog\"\r\n      :dialogArray=\"dialog\"\r\n      @OnConfirm=\"OnConfirm\"\r\n      @onCancel=\"onCancel\"\r\n    />\r\n  </div>\r\n</template>\r\n<style scoped></style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}